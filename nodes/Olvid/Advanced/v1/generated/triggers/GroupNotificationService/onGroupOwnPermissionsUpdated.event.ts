// @generated by protoc-gen-n8n-actions v1 with parameter "target=ts"
// @generated from file olvid/daemon/services/v1/notification_service.proto (package olvid.daemon.services.v1, syntax proto3)
/* eslint-disable */

import { OlvidClient, notifications, datatypes } from '@olvid/bot-node';
import type { ITriggerFunctions } from 'n8n-workflow';

export function groupOwnPermissionsUpdated(this: ITriggerFunctions, client: OlvidClient, onCallback?: Function, returnMockData: boolean = false): Function {
    if (returnMockData) {
        this.emit([this.helpers.returnJsonArray([{
// group.mockData,
// permissions.mockData,
// previousPermissions.mockData
        }])]);
        onCallback?.();
        return () => {};
    }

	const callback = (notification: notifications.GroupOwnPermissionsUpdatedNotification) => {
		this.emit([this.helpers.returnJsonArray([{group: {id: Number(notification?.group?.id), type: datatypes.Group_Type[notification?.group?.type ?? 0], advancedConfiguration: {readOnly: notification?.group?.advancedConfiguration?.readOnly, remoteDelete: datatypes.Group_AdvancedConfiguration_RemoteDelete[notification?.group?.advancedConfiguration?.remoteDelete ?? 0]}, ownPermissions: {admin: notification?.group?.ownPermissions?.admin, remoteDeleteAnything: notification?.group?.ownPermissions?.remoteDeleteAnything, editOrRemoteDeleteOwnMessages: notification?.group?.ownPermissions?.editOrRemoteDeleteOwnMessages, changeSettings: notification?.group?.ownPermissions?.changeSettings, sendMessage: notification?.group?.ownPermissions?.sendMessage}, members: notification?.group?.members.map(e => ({contactId: Number(e.contactId), permissions: {admin: e.permissions?.admin, remoteDeleteAnything: e.permissions?.remoteDeleteAnything, editOrRemoteDeleteOwnMessages: e.permissions?.editOrRemoteDeleteOwnMessages, changeSettings: e.permissions?.changeSettings, sendMessage: e.permissions?.sendMessage}})), pendingMembers: notification?.group?.pendingMembers.map(e => ({pendingMemberId: Number(e.pendingMemberId), contactId: Number(e.contactId), displayName: e.displayName, declined: e.declined, permissions: {admin: e.permissions?.admin, remoteDeleteAnything: e.permissions?.remoteDeleteAnything, editOrRemoteDeleteOwnMessages: e.permissions?.editOrRemoteDeleteOwnMessages, changeSettings: e.permissions?.changeSettings, sendMessage: e.permissions?.sendMessage}})), updateInProgress: notification?.group?.updateInProgress, keycloakManaged: notification?.group?.keycloakManaged, name: notification?.group?.name, description: notification?.group?.description, hasAPhoto: notification?.group?.hasAPhoto}},{permissions: {admin: notification?.permissions?.admin, remoteDeleteAnything: notification?.permissions?.remoteDeleteAnything, editOrRemoteDeleteOwnMessages: notification?.permissions?.editOrRemoteDeleteOwnMessages, changeSettings: notification?.permissions?.changeSettings, sendMessage: notification?.permissions?.sendMessage}},{previousPermissions: {admin: notification?.previousPermissions?.admin, remoteDeleteAnything: notification?.previousPermissions?.remoteDeleteAnything, editOrRemoteDeleteOwnMessages: notification?.previousPermissions?.editOrRemoteDeleteOwnMessages, changeSettings: notification?.previousPermissions?.changeSettings, sendMessage: notification?.previousPermissions?.sendMessage}}])]);
		onCallback?.();
	}

	return client.stubs.groupNotificationStub.groupOwnPermissionsUpdated({}, callback, () => {});
}
